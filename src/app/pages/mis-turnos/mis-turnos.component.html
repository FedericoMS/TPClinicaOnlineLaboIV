<div class="container">
  <div class="screen">
    <div class="screen__content">
      <div class="appointments">

        <!-- <div class="boton-registro">
                    <button class="btn btn-primary" style="justify-content: left;" color="primary">Registro</button>
                </div> -->

        <!--LISTA DE TURNOS DEL ADMINISTRADOR-->
        <div class="listado-turnos-admin" *ngIf="this.userService.getCurrentProfile() == 'admin'">
          <table style="color:rgb(0, 162, 255);" class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Fecha</th>
                <th scope="col">Hora</th>
                <th scope="col">Especialidad</th>
                <th scope="col">Profesional</th>
                <th scope="col">Estado</th>
                <th scope="col">Acción</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let turno of this.listaDeTurnos">
                <td>{{turno.fecha}}</td>
                <td>{{turno.hora}}</td>
                <td>{{turno.especialidad}}</td>
                <td>{{turno.especialista}}</td>
                <td>{{turno.estado}}</td>
                <td><button mat-raised-button color="accent">Acción</button></td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 
          Como PACIENTE
          ■ Solo tendrá acceso el Paciente y le mostrará los turnos que él solicitó.
          ■ Esta sección deberá contar con un filtro único donde podrá filtrar por:
          ● Especialidad
          ● Especialista
          ● NO UTILIZAR Combobox
          ■ A su vez desde este listado podrá realizar las siguientes acciones:

              ● Cancelar turno
              ○ Solamente debe ser visible si el turno no fue realizado.
              ○ Debe dejar un comentario del porque se cancela el turno.

          ● Ver reseña.
          ○ Solo debe ser visible si el turno tiene un comentario o reseña
          cargado.

              ● Completar encuesta.
              ○ Solamente debe estar visible si el especialista marcó el turno
              como realizado y dejo la reseña.

          ● Calificar Atención
          ○ Solamente debe ser visible una vez que el turno sea
          realizado.
          ○ El paciente debe dejar un comentario de como fue la
          atención del Especialista.

              ■ Debe estar bien visible el estado del turno.
              ■ Solamente mostrar la acción que puede realizar el usuario.
        -->

        <!--LISTA DE TURNOS DEL PACIENTE ACTUAL-->
        <div class="listado-turnos-paciente" *ngIf="this.userService.getCurrentProfile() == 'paciente'">
          <table style="color:rgb(0, 162, 255);" class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Fecha</th>
                <th scope="col">Hora</th>
                <th scope="col">Especialidad</th>
                <th scope="col">Profesional</th>
                <th scope="col">Estado</th>
                <th scope="col">Acción</th>
                <!--<th scope="col" *ngIf="turno.estado == 'realizado' && turno.resenia != ''">Opinión</th>-->
                <!--<th scope="col" *ngIf="turno.estado == 'realizado' && turno.resenia != ''">Encuesta</th> -->
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let turno of this.listaDeTurnosDelPaciente">
                <td>{{turno.fecha}}</td>
                <td>{{turno.hora}}</td>
                <td>{{turno.especialidad}}</td>
                <td>{{turno.especialista}}</td>
                <!-- ESTADOS DE LOS TURNOS: SOLICITADO, ACEPTADO, CANCELADO, RECHAZADO Y REALIZADO-->
                <td><span class="badge bg-primary">{{turno.estado}}</span> </td> 
                <!--CANCELAR TURNO. EL PAC DEBE DEJAR COMENTARIO-->
                <td *ngIf="turno.estado != 'realizado' && turno.estado != 'cancelado'"><button mat-raised-button color="accent" (click)="modalCancelacion(turno, 1, 'paciente')">Cancelar</button></td>
                <!--VER RESEÑA -->
                <td *ngIf="turno.resenia != '' && turno.estado == 'realizado'"><button mat-raised-button color="accent" (click)="verResenia(turno.resenia)">Ver reseña</button></td>
                <!--CALIFICAR ATENCIÓN CON UN COMENTARIO. Por ahí deba agregar algo que aclare que la calificación fue enviada-->
                <td *ngIf="turno.estado == 'realizado' && turno.calificacion == ''"><button mat-raised-button color="accent" (click)="modalCalificacion(turno,'paciente')">Calificar atención</button></td> 
                <!-- COMPLETAR ENCUESTA-->
                <td *ngIf="turno.estado == 'realizado' && turno.resenia != '' && turno.encuesta == ''"><button mat-raised-button color="accent" (click)="modalEncuesta(turno, 'paciente')">Completar encuesta</button></td>
              </tr>
            </tbody>
          </table>
        </div>

        <!--LISTA DE TURNOS DEL ESPECIALISTA ACTUAL-->

        <div class="listado-turnos-especialista" *ngIf="this.userService.getCurrentProfile() == 'especialista'">
          <table style="color:rgb(0, 162, 255);" class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Fecha</th>
                <th scope="col">Hora</th>
                <th scope="col">Mi especialidad</th>
                <th scope="col">Paciente</th>
                <th scope="col">Estado</th>
                <th scope="col">Acción</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let turno of this.listaDeTurnosDelEspecialista">
                <td>{{turno.fecha}}</td>
                <td>{{turno.hora}}</td>
                <td>{{turno.especialidad}}</td>
                <td>{{turno.paciente}}</td>
                <td><span class="badge bg-primary">{{turno.estado}}</span></td>
                <!--ACEPTAR TURNO-->
                <td *ngIf="turno.estado != 'realizado' && turno.estado != 'rechazado' && turno.estado != 'aceptado' && turno.estado != 'cancelado'"><button mat-raised-button color="accent" (click)="modalAceptacion(turno)">Aceptar</button></td>

                 <!--CANCELAR TURNO. EL ESP DEBE DEJAR COMENTARIO-->
                 <td *ngIf="turno.estado != 'realizado' && turno.estado != 'rechazado' && turno.estado != 'aceptado'"><button mat-raised-button color="accent" (click)="modalCancelacion(turno, 1, 'especialista')">Cancelar</button></td>
                 <!-- RECHAZAR TURNO -->
                 <td *ngIf="turno.estado != 'realizado' && turno.estado != 'cancelado' && turno.estado != 'aceptado' && turno.estado != 'rechazado'"><button mat-raised-button color="accent" (click)="modalCancelacion(turno, 2, 'especialista')">Rechazar</button></td>
               <!--<td><button mat-raised-button color="accent">Acción</button></td> -->
              </tr>
            </tbody>
          </table>
        </div>



      </div>
    </div>
  </div>